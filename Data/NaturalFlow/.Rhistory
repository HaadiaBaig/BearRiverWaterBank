#Install and load the packages needed
packages <- c("dataRetrieval","dplyr",
"ggplot2", "tidyr", "reshape2")
for (package in packages) {
if (!requireNamespace(package, quietly = TRUE)) {
install.packages(package) # Install the package if not found
}
library(package, character.only = TRUE) # Load the package
}
sites <- read.csv("Sites.csv")
data <- NULL
##############################################################
for(i in 1:nrow(sites)){
siteNumber <- as.character(sites[i, "SiteNumber"])
parameterCd <- "00060"
#Download daily data for year 2000- 2024
r <- readNWISdv(
siteNumber, parameterCd,
"1999-01-01", "2024-12-30")
#Remove unnecessary columns
r <- r[,-5]
#Rename
colnames(r)[4] <- "Discharge"
#cfs to acft
r$Vol <- r$`Discharge` *1.983
r$year = year(r$Date)
r$yday <- yday(r$Date)
r$month <- month(r$Date)
r <- r %>%
mutate(wateryear = case_when(
lubridate::month(Date) %in% 10:12 ~ year + 1,
TRUE ~ year))
d <- r %>%
group_by(year, wateryear, month)%>%
summarise(Volume = sum(Vol))
d$Site <- as.character(sites[i,"Name"])
data <- rbind(d, data)
}
data$year <- NULL
##############################################################
for(i in 1:nrow(sites)){
siteNumber <- as.character(sites[i, "SiteNumber"])
parameterCd <- "00060"
#Download daily data for year 2000- 2024
r <- readNWISdv(
siteNumber, parameterCd,
"1999-01-01", "2024-12-30")
#Remove unnecessary columns
r <- r[,-5]
#Rename
colnames(r)[4] <- "Discharge"
#cfs to acft
r$Vol <- r$`Discharge` *1.983
r$year = year(r$Date)
r$yday <- yday(r$Date)
r$month <- month(r$Date)
r <- r %>%
mutate(wateryear = case_when(
lubridate::month(Date) %in% 10:12 ~ year + 1,
TRUE ~ year))
d <- r %>%
group_by(year, wateryear, month)%>%
summarise(Volume = sum(Vol))
d$Site <- as.character(sites[i,"Name"])
data <- rbind(d, data)
}
i=1
siteNumber <- as.character(sites[i, "SiteNumber"])
parameterCd <- "00060"
#Download daily data for year 2000- 2024
r <- readNWISdv(
siteNumber, parameterCd,
"1999-01-01", "2024-12-30")
#Remove unnecessary columns
r <- r[,-5]
#Rename
colnames(r)[4] <- "Discharge"
#cfs to acft
r$Vol <- r$`Discharge` *1.983
r$year = year(r$Date)
#Install and load the packages needed
packages <- c("dataRetrieval","dplyr",
"ggplot2", "tidyr", "reshape2", "lubridate")
for (package in packages) {
if (!requireNamespace(package, quietly = TRUE)) {
install.packages(package) # Install the package if not found
}
library(package, character.only = TRUE) # Load the package
}
i=1
siteNumber <- as.character(sites[i, "SiteNumber"])
parameterCd <- "00060"
#Download daily data for year 2000- 2024
r <- readNWISdv(
siteNumber, parameterCd,
"1999-01-01", "2024-12-30")
#Remove unnecessary columns
r <- r[,-5]
#Rename
colnames(r)[4] <- "Discharge"
#cfs to acft
r$Vol <- r$`Discharge` *1.983
r$year = year(r$Date)
##############################################################
for(i in 1:nrow(sites)){
siteNumber <- as.character(sites[i, "SiteNumber"])
parameterCd <- "00060"
#Download daily data for year 2000- 2024
r <- readNWISdv(
siteNumber, parameterCd,
"1999-01-01", "2024-12-30")
#Remove unnecessary columns
r <- r[,-5]
#Rename
colnames(r)[4] <- "Discharge"
#cfs to acft
r$Vol <- r$`Discharge` *1.983
r$year = year(r$Date)
r$yday <- yday(r$Date)
r$month <- month(r$Date)
r <- r %>%
mutate(wateryear = case_when(
lubridate::month(Date) %in% 10:12 ~ year + 1,
TRUE ~ year))
d <- r %>%
group_by(year, wateryear, month)%>%
summarise(Volume = sum(Vol))
d$Site <- as.character(sites[i,"Name"])
data <- rbind(d, data)
}
data$year <- NULL
unique(data$Site)
d1 <- data %>%
mutate(Season = case_when(
month %in% 4:9 ~"Summer"))
d1[is.na(d1)] <- "Winter"
Seasonal_Sum <- d1 %>%
group_by(Site, wateryear, Season) %>%
summarise(Volume = sum(Volume))
#Install and load the packages needed
packages <- c("dataRetrieval","dplyr",
"ggplot2", "tidyr", "reshape2", "lubridate")
for (package in packages) {
if (!requireNamespace(package, quietly = TRUE)) {
install.packages(package) # Install the package if not found
}
library(package, character.only = TRUE) # Load the package
}
sites <- read.csv("Sites.csv")
